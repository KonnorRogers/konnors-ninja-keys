import{a as I,b as re,c as ne,d as ae}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-NYV7GUCX.js";import{a as oe}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-QDQKUXOT.js";import{a as X,b as O,c as H,d as j,e as W,f as P,g as Z,h as ee,i as se}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-GI5UDAPX.js";import{a as x,b as A,c as $}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-4A34YUFH.js";import{a as Q}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-MG7MCOCR.js";import{a as te,b as ie}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-ZPHIMDRV.js";import{b as M,c as E,d as G}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-JK65MYUH.js";import{d as R}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-HGOD5HCG.js";var le=(t,e,i)=>{let s=new Map;for(let r=e;r<=i;r++)s.set(t[r],r);return s},ce=A(class extends ${constructor(t){if(super(t),t.type!==x.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,i){let s;i===void 0?i=e:e!==void 0&&(s=e);let r=[],n=[],a=0;for(let o of t)r[a]=s?s(o,a):a,n[a]=i(o,a),a++;return{values:n,keys:r}}render(t,e,i){return this.dt(t,e,i).values}update(t,[e,i,s]){var r;let n=W(t),{values:a,keys:o}=this.dt(e,i,s);if(!Array.isArray(n))return this.ht=o,a;let l=(r=this.ht)!==null&&r!==void 0?r:this.ht=[],d=[],g,_,c=0,u=n.length-1,h=0,p=a.length-1;for(;c<=u&&h<=p;)if(n[c]===null)c++;else if(n[u]===null)u--;else if(l[c]===o[h])d[h]=H(n[c],a[h]),c++,h++;else if(l[u]===o[p])d[p]=H(n[u],a[p]),u--,p--;else if(l[c]===o[p])d[p]=H(n[c],a[p]),O(t,d[p+1],n[c]),c++,p--;else if(l[u]===o[h])d[h]=H(n[u],a[h]),O(t,n[c],n[u]),u--,h++;else if(g===void 0&&(g=le(o,h,p),_=le(l,c,u)),g.has(l[c]))if(g.has(l[u])){let w=_.get(o[h]),D=w!==void 0?n[w]:null;if(D===null){let Y=O(t,n[c]);H(Y,a[h]),d[h]=Y}else d[h]=H(D,a[h]),O(t,n[c],D),n[w]=null;h++}else P(n[u]),u--;else P(n[c]),c++;for(;h<=p;){let w=O(t,d[p+1]);H(w,a[h]),d[h++]=w}for(;c<=u;){let w=n[c++];w!==null&&P(w)}return this.ht=o,j(t,d),E}});var U=A(class extends ${constructor(t){if(super(t),t.type!==x.PROPERTY&&t.type!==x.ATTRIBUTE&&t.type!==x.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!X(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===E||e===G)return e;let i=t.element,s=t.name;if(t.type===x.PROPERTY){if(e===i[s])return E}else if(t.type===x.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(s))return E}else if(t.type===x.ATTRIBUTE&&i.getAttribute(s)===e+"")return E;return j(t),e}});var V=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function F(t,e,i,s){t.addEventListener?t.addEventListener(e,i,s):t.attachEvent&&t.attachEvent("on".concat(e),function(){i(window.event)})}function pe(t,e){for(var i=e.slice(0,e.length-1),s=0;s<i.length;s++)i[s]=t[i[s].toLowerCase()];return i}function ye(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),i=e.lastIndexOf("");i>=0;)e[i-1]+=",",e.splice(i,1),i=e.lastIndexOf("");return e}function ve(t,e){for(var i=t.length>=e.length?t:e,s=t.length>=e.length?e:t,r=!0,n=0;n<i.length;n++)s.indexOf(i[n])===-1&&(r=!1);return r}var B={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":V?173:189,"=":V?61:187,";":V?59:186,"'":222,"[":219,"]":221,"\\":220},k={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},N={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},m={16:!1,18:!1,17:!1,91:!1},y={};for(K=1;K<20;K++)B["f".concat(K)]=111+K;var K,f=[],he=!1,me="all",ge=[],S=function(e){return B[e.toLowerCase()]||k[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},be=function(e){return Object.keys(B).find(function(i){return B[i]===e})},ke=function(e){return Object.keys(k).find(function(i){return k[i]===e})};function _e(t){me=t||"all"}function C(){return me||"all"}function we(){return f.slice(0)}function xe(){return f.map(function(t){return be(t)||ke(t)||String.fromCharCode(t)})}function He(t){var e=t.target||t.srcElement,i=e.tagName,s=!0;return(e.isContentEditable||(i==="INPUT"||i==="TEXTAREA"||i==="SELECT")&&!e.readOnly)&&(s=!1),s}function Ee(t){return typeof t=="string"&&(t=S(t)),f.indexOf(t)!==-1}function Me(t,e){var i,s;t||(t=C());for(var r in y)if(Object.prototype.hasOwnProperty.call(y,r))for(i=y[r],s=0;s<i.length;)i[s].scope===t?i.splice(s,1):s++;C()===t&&_e(e||"all")}function Oe(t){var e=t.keyCode||t.which||t.charCode,i=f.indexOf(e);if(i>=0&&f.splice(i,1),t.key&&t.key.toLowerCase()==="meta"&&f.splice(0,f.length),(e===93||e===224)&&(e=91),e in m){m[e]=!1;for(var s in k)k[s]===e&&(b[s]=!1)}}function Ke(t){if(typeof t>"u")Object.keys(y).forEach(function(a){return delete y[a]});else if(Array.isArray(t))t.forEach(function(a){a.key&&z(a)});else if(typeof t=="object")t.key&&z(t);else if(typeof t=="string"){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];var r=i[0],n=i[1];typeof r=="function"&&(n=r,r=""),z({key:t,scope:r,method:n,splitKey:"+"})}}var z=function(e){var i=e.key,s=e.scope,r=e.method,n=e.splitKey,a=n===void 0?"+":n,o=ye(i);o.forEach(function(l){var d=l.split(a),g=d.length,_=d[g-1],c=_==="*"?"*":S(_);if(y[c]){s||(s=C());var u=g>1?pe(k,d):[];y[c]=y[c].filter(function(h){var p=r?h.method===r:!0;return!(p&&h.scope===s&&ve(h.mods,u))})}})};function de(t,e,i,s){if(e.element===s){var r;if(e.scope===i||e.scope==="all"){r=e.mods.length>0;for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&(!m[n]&&e.mods.indexOf(+n)>-1||m[n]&&e.mods.indexOf(+n)===-1)&&(r=!1);(e.mods.length===0&&!m[16]&&!m[18]&&!m[17]&&!m[91]||r||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}function fe(t,e){var i=y["*"],s=t.keyCode||t.which||t.charCode;if(b.filter.call(this,t)){if((s===93||s===224)&&(s=91),f.indexOf(s)===-1&&s!==229&&f.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(h){var p=N[h];t[h]&&f.indexOf(p)===-1?f.push(p):!t[h]&&f.indexOf(p)>-1?f.splice(f.indexOf(p),1):h==="metaKey"&&t[h]&&f.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(f=f.slice(f.indexOf(p))))}),s in m){m[s]=!0;for(var r in k)k[r]===s&&(b[r]=!0);if(!i)return}for(var n in m)Object.prototype.hasOwnProperty.call(m,n)&&(m[n]=t[N[n]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(f.indexOf(17)===-1&&f.push(17),f.indexOf(18)===-1&&f.push(18),m[17]=!0,m[18]=!0);var a=C();if(i)for(var o=0;o<i.length;o++)i[o].scope===a&&(t.type==="keydown"&&i[o].keydown||t.type==="keyup"&&i[o].keyup)&&de(t,i[o],a,e);if(s in y){for(var l=0;l<y[s].length;l++)if((t.type==="keydown"&&y[s][l].keydown||t.type==="keyup"&&y[s][l].keyup)&&y[s][l].key){for(var d=y[s][l],g=d.splitKey,_=d.key.split(g),c=[],u=0;u<_.length;u++)c.push(S(_[u]));c.sort().join("")===f.sort().join("")&&de(t,d,a,e)}}}}function Be(t){return ge.indexOf(t)>-1}function b(t,e,i){f=[];var s=ye(t),r=[],n="all",a=document,o=0,l=!1,d=!0,g="+",_=!1;for(i===void 0&&typeof e=="function"&&(i=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(n=e.scope),e.element&&(a=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(d=e.keydown),e.capture!==void 0&&(_=e.capture),typeof e.splitKey=="string"&&(g=e.splitKey)),typeof e=="string"&&(n=e);o<s.length;o++)t=s[o].split(g),r=[],t.length>1&&(r=pe(k,t)),t=t[t.length-1],t=t==="*"?"*":S(t),t in y||(y[t]=[]),y[t].push({keyup:l,keydown:d,scope:n,mods:r,shortcut:s[o],method:i,key:s[o],splitKey:g,element:a});typeof a<"u"&&!Be(a)&&window&&(ge.push(a),F(a,"keydown",function(c){fe(c,a)},_),he||(he=!0,F(window,"focus",function(){f=[]},_)),F(a,"keyup",function(c){fe(c,a),Oe(c)},_))}function Ce(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(y).forEach(function(i){var s=y[i].filter(function(r){return r.scope===e&&r.shortcut===t});s.forEach(function(r){r&&r.method&&r.method()})})}var J={getPressedKeyString:xe,setScope:_e,getScope:C,deleteScope:Me,getPressedKeyCodes:we,isPressed:Ee,filter:He,trigger:Ce,unbind:Ke,keyMap:B,modifier:k,modifierMap:N};for(L in J)Object.prototype.hasOwnProperty.call(J,L)&&(b[L]=J[L]);var L;typeof window<"u"&&(ue=window.hotkeys,b.noConflict=function(t){return t&&window.hotkeys===b&&(window.hotkeys=ue),b},window.hotkeys=b);var ue;var v=b,T=class extends Q{static get scopedElements(){return{"ninja-action":ae,"ninja-header":se}}constructor(){super(),this._headerRef=Z(),this.placeholder="Type a command or search...",this.disableHotkeys=!1,this.searchType="regex",this.highlightMatches=!1,this.searchLabel="Search for actions",this.listboxLabel="List of actions",this.hideBreadcrumbs=!1,this.openHotkey="cmd+k,ctrl+k",this.navigationUpHotkey="up",this.navigationDownHotkey="down",this.closeHotkey="esc",this.goBackHotkey="backspace",this.selectHotkey="enter",this.hotKeysJoinedView=!1,this.noAutoLoadMdIcons=!1,this.data=[],this.__selected__=null,this.visible=!1,this._bump=!0,this._actionMatches=[],this._search="",this.currentRoot=void 0,this._flatData=[]}open(e={}){this._bump=!0,this.visible=!0;let i=this._headerRef.value;if(requestAnimationFrame(()=>{i&&(i.focusSearch(),i.expanded=!0,i.controls="actions-list")}),this._actionMatches.length>0){this._selected=this._actionMatches[0];let s=this._headerRef.value;s&&this._selected&&this._selected.id&&(s.activeDescendant=this._selected.id)}this.setParent(e.parent)}close(){this._bump=!1,this.visible=!1;let e=this._headerRef.value;e&&(e.expanded=!1)}setParent(e){e?this.currentRoot=e:this.currentRoot=void 0,this._selected=void 0,this._search="",this._headerRef.value?.setSearch("")}getBreadcrumbs(){let e=[],i=this._selected?.parent;if(i)for(e.push(i);i;){let s=this._flatData.find(r=>r.id===i);s?.parent&&e.push(s.parent),i=s?s.parent:void 0}return e.reverse()}get _selected(){return this.__selected__}set _selected(e){let i=this._headerRef.value;i&&e&&e.id&&(i.activeDescendant=e.id);let s=this.__selected__;this.__selected__=e,this.requestUpdate("_selected",s)}connectedCallback(){super.connectedCallback(),this.noAutoLoadMdIcons||document.fonts.load("24px Material Icons","apps").then(()=>{}),this._registerInternalHotkeys()}disconnectedCallback(){super.disconnectedCallback(),this._unregisterInternalHotkeys()}_flattern(e,i){let s=[];return e||(e=[]),e.map(r=>{let n=r.children&&r.children.some(o=>typeof o=="string"),a={...r,parent:r.parent||i};return n||(a.children&&a.children.length&&(i=r.id,s=[...s,...a.children]),a.children=a.children?a.children.map(o=>o.id):[]),a}).concat(s.length?this._flattern(s,i):s)}update(e){e.has("data")&&!this.disableHotkeys&&(this._flatData=this._flattern(this.data),this._flatData.forEach(i=>{i.hotkey&&v(i.hotkey,s=>{s.preventDefault(),i.handler&&i.handler(i,s)})})),super.update(e)}shouldNotOpen(e){let i=e.composedPath(),s=["input","textarea"];return i.some(r=>r?.getAttribute?.("contenteditable")==="true"?!0:s.includes(r?.tagName?.toLowerCase()))}_registerInternalHotkeys(){this.openHotkey&&v(this.openHotkey,e=>{this.shouldNotOpen(e)||(e.preventDefault(),this.visible?this.close():this.open())}),this.selectHotkey&&v(this.selectHotkey,e=>{this.visible&&(e.preventDefault(),this._actionSelected(this._actionMatches[this._selectedIndex],e))}),this.goBackHotkey&&v(this.goBackHotkey,e=>{this.visible&&(this._search||(e.preventDefault(),this._goBack()))}),this.navigationDownHotkey&&v(this.navigationDownHotkey,e=>{this.visible&&(e.preventDefault(),this._selectedIndex>=this._actionMatches.length-1?this._selected=this._actionMatches[0]:this._selected=this._actionMatches[this._selectedIndex+1])}),this.navigationUpHotkey&&v(this.navigationUpHotkey,e=>{this.visible&&(e.preventDefault(),this._selectedIndex===0?this._selected=this._actionMatches[this._actionMatches.length-1]:this._selected=this._actionMatches[this._selectedIndex-1])}),this.closeHotkey&&v(this.closeHotkey,e=>{this.visible&&(e.preventDefault(),this.visible=!1,this.close())})}_unregisterInternalHotkeys(){this.openHotkey&&v.unbind(this.openHotkey),this.selectHotkey&&v.unbind(this.selectHotkey),this.goBackHotkey&&v.unbind(this.goBackHotkey),this.navigationDownHotkey&&v.unbind(this.navigationDownHotkey),this.navigationUpHotkey&&v.unbind(this.navigationUpHotkey),this.closeHotkey&&v.unbind(this.closeHotkey)}_actionFocused(e,i){this._selected=e,i.target.ensureInView()}_onTransitionEnd(){this._bump=!1}get breadcrumbs(){return this.getBreadcrumbs()}_goBack(){let e=this.getBreadcrumbs();if(e){let i=e.length>1?e[e.length-2]:void 0;this.setParent(i);return}}findActionElement(e=this._selectedIndex){let i=this._actionMatches[e]?.id;if(i==null)return null;let s="#ninja-action__"+i;return this.shadowRoot?.querySelector(s)}stringToRegExp(e){return ne(e)}findMatches(e){return e.filter(i=>{if(this._search.trim()==="")return i.parent===this.currentRoot&&!0;let{title:s,keywords:r,content:n}=i,a=!1;if(this.searchType==="regex"){let o=this.stringToRegExp(this._search);a=!!(s&&s.match(o)||r&&r.match(o)||n&&n.match(o))}if(this.searchType==="fuzzy"){let o=this._search;a=!!(s&&q(o,s)||r&&q(o,r)||n&&q(o,n))}return(!this.currentRoot&&this._search||i.parent===this.currentRoot)&&a})}render(){let e={bump:this._bump,"modal-content":!0},i={visible:this.visible,modal:!0},s,r=this._flatData;r=this.findMatches(r),s=r.reduce((o,l)=>o.set(l.section,[...o.get(l.section)||[],l]),new Map),this._actionMatches=[...s.values()].flat(),this._actionMatches.length>0&&this._selectedIndex===-1&&(this._selected=this._actionMatches[0]),this._actionMatches.length===0&&(this._selected=void 0);let n=o=>M` ${ce(o,l=>l.id,l=>M`<ninja-action
            id=${"ninja-action__"+l.id}
            role="option"
            exportparts="ninja-action, ninja-selected,ninja-icon, ninja-hotkeys, ninja-hotkey, ninja-action__header, ninja-action__title, ninja-action__content"
            aria-selected=${U(l.id===this._selected?.id)}
            .searchQuery=${this._search}
            .selected=${U(l.id===this._selected?.id)}
            .hotKeysJoinedView=${this.hotKeysJoinedView}
            .searchType=${this.searchType}
            .highlightMatches=${this.highlightMatches}
            tabindex="-1"
            @mousemove=${d=>{this._actionFocused(l,d)}}
            @actionsSelected=${d=>this._actionSelected(d.detail,d)}
            .action=${l}
          ></ninja-action>`)}`,a=[];return s.forEach((o,l)=>{let d=l?M`<div class="group-header">${l}</div>`:void 0;a.push(M`${d}${n(o)}`)}),M`
      <div part="modal-overlay" @click=${this._overlayClick} class=${I(i)}>
        <div part="modal-content" class=${I(e)} @animationend=${this._onTransitionEnd}>
          <ninja-header
            part="modal-header"
            exportparts="ninja-input,ninja-input-wrapper"
            ${ee(this._headerRef)}
            .placeholder=${this.placeholder}
            .hideBreadcrumbs=${this.hideBreadcrumbs}
            .breadcrumbs=${this.getBreadcrumbs()}
            searchLabel=${this.searchLabel}
            @change=${this._handleInput}
            @setParent=${o=>this.setParent(o.detail.parent)}
            @close=${this.close}
          >
          </ninja-header>
          <div part="modal-body" class="modal-body">
            <div
              id="actions-list"
              class="actions-list"
              role="listbox"
              part="actions-list"
              aria-labelledby="listbox-label"
            >
              ${a}
            </div>

            <label id="listbox-label" class="visually-hidden">
              <slot>
                <span>${this.listboxLabel}</span>
              </slot>
            </label>
            <slot name="footer"> ${oe} </slot>
          </div>
        </div>
      </div>
    `}get _selectedIndex(){return this._selected?this._actionMatches.indexOf(this._selected):-1}_actionSelected(e,i){this.dispatchEvent(new CustomEvent("selected",{detail:{search:this._search,action:e},bubbles:!0,composed:!0})),e&&(e.children&&e.children?.length>0&&(this.currentRoot=e.id,this._search=""),this._headerRef.value?.setSearch(""),this._headerRef.value?.focusSearch(),e.handler?e.handler(e,i)?.keepOpen||this.close():this.findActionElement(this._selectedIndex)?.forceClick(),this._bump=!0)}async _handleInput(e){this._search=e.detail.search,await this.updateComplete,this.dispatchEvent(new CustomEvent("change",{detail:{search:this._search,actions:this._actionMatches},bubbles:!0,composed:!0}))}_overlayClick(e){let i=e.target;i instanceof Element&&i?.classList.contains("modal")&&this.close()}};R(T,"baseName","ninja-keys"),R(T,"styles",[te,ie]),R(T,"properties",{placeholder:{type:String},disableHotkeys:{type:Boolean},searchType:{attribute:"search-type"},searchLabel:{attribute:"search-label"},listboxLabel:{attribute:"listbox-label"},hideBreadcrumbs:{type:Boolean},openHotkey:{},navigationUpHotkey:{},navigationDownHotkey:{},closeHotkey:{},goBackHotkey:{},selectHotkey:{},hotKeysJoinedView:{type:Boolean},noAutoLoadMdIcons:{type:Boolean},data:{type:Array,hasChanged(){return!0}},highlightMatches:{type:Boolean,reflect:!0,attribute:"highlight-matches"},__selected__:{state:!0},visible:{state:!0},_bump:{state:!0},_actionMatches:{state:!0},_search:{state:!0},currentRoot:{state:!0},_flatData:{state:!0}});function q(t,e){return[t,...t.split(/\s+/)].some(i=>re(i,e))}export{T as a};
/*! Bundled license information:

lit-html/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/live.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=/konnors-ninja-keys/bridgetown/static/chunks/chunk-S2X2GJVM.js.map
