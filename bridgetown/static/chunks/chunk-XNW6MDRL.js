import{a as I,b as re,c as ne,d as ae}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-RUOLNFJM.js";import{a as oe}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-BYB7KQPT.js";import{a as X,b as O,c as H,d as $,e as W,f as P,g as Z,h as ee,i as se}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-QXEGOJHM.js";import{a as x,b as j,c as A}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-VUR7V3FZ.js";import{a as Q}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-RLM5VMTV.js";import{a as te,b as ie}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-UYJG54BB.js";import{c as M,d as E,e as G}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-Q477UYHU.js";import{d as R}from"/konnors-ninja-keys/bridgetown/static/chunks/chunk-HGOD5HCG.js";var le=(t,e,i)=>{let s=new Map;for(let r=e;r<=i;r++)s.set(t[r],r);return s},ce=j(class extends A{constructor(t){if(super(t),t.type!==x.CHILD)throw Error("repeat() can only be used in text expressions")}ct(t,e,i){let s;i===void 0?i=e:e!==void 0&&(s=e);let r=[],n=[],a=0;for(let l of t)r[a]=s?s(l,a):a,n[a]=i(l,a),a++;return{values:n,keys:r}}render(t,e,i){return this.ct(t,e,i).values}update(t,[e,i,s]){var r;let n=W(t),{values:a,keys:l}=this.ct(e,i,s);if(!Array.isArray(n))return this.ut=l,a;let o=(r=this.ut)!==null&&r!==void 0?r:this.ut=[],c=[],y,_,h=0,u=n.length-1,f=0,p=a.length-1;for(;h<=u&&f<=p;)if(n[h]===null)h++;else if(n[u]===null)u--;else if(o[h]===l[f])c[f]=H(n[h],a[f]),h++,f++;else if(o[u]===l[p])c[p]=H(n[u],a[p]),u--,p--;else if(o[h]===l[p])c[p]=H(n[h],a[p]),O(t,c[p+1],n[h]),h++,p--;else if(o[u]===l[f])c[f]=H(n[u],a[f]),O(t,n[h],n[u]),u--,f++;else if(y===void 0&&(y=le(l,f,p),_=le(o,h,u)),y.has(o[h]))if(y.has(o[u])){let w=_.get(l[f]),D=w!==void 0?n[w]:null;if(D===null){let Y=O(t,n[h]);H(Y,a[f]),c[f]=Y}else c[f]=H(D,a[f]),O(t,n[h],D),n[w]=null;f++}else P(n[u]),u--;else P(n[h]),h++;for(;f<=p;){let w=O(t,c[p+1]);H(w,a[f]),c[f++]=w}for(;h<=u;){let w=n[h++];w!==null&&P(w)}return this.ut=l,$(t,c),E}});var U=j(class extends A{constructor(t){if(super(t),t.type!==x.PROPERTY&&t.type!==x.ATTRIBUTE&&t.type!==x.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!X(t))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(t,[e]){if(e===E||e===G)return e;let i=t.element,s=t.name;if(t.type===x.PROPERTY){if(e===i[s])return E}else if(t.type===x.BOOLEAN_ATTRIBUTE){if(!!e===i.hasAttribute(s))return E}else if(t.type===x.ATTRIBUTE&&i.getAttribute(s)===e+"")return E;return $(t),e}});var V=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function N(t,e,i,s){t.addEventListener?t.addEventListener(e,i,s):t.attachEvent&&t.attachEvent("on".concat(e),function(){i(window.event)})}function pe(t,e){for(var i=e.slice(0,e.length-1),s=0;s<i.length;s++)i[s]=t[i[s].toLowerCase()];return i}function me(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),i=e.lastIndexOf("");i>=0;)e[i-1]+=",",e.splice(i,1),i=e.lastIndexOf("");return e}function ve(t,e){for(var i=t.length>=e.length?t:e,s=t.length>=e.length?e:t,r=!0,n=0;n<i.length;n++)s.indexOf(i[n])===-1&&(r=!1);return r}var T={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":V?173:189,"=":V?61:187,";":V?59:186,"'":222,"[":219,"]":221,"\\":220},k={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},J={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},g={16:!1,18:!1,17:!1,91:!1},m={};for(K=1;K<20;K++)T["f".concat(K)]=111+K;var K,d=[],he=!1,ye="all",ge=[],L=function(e){return T[e.toLowerCase()]||k[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},be=function(e){return Object.keys(T).find(function(i){return T[i]===e})},ke=function(e){return Object.keys(k).find(function(i){return k[i]===e})};function _e(t){ye=t||"all"}function B(){return ye||"all"}function we(){return d.slice(0)}function xe(){return d.map(function(t){return be(t)||ke(t)||String.fromCharCode(t)})}function He(t){var e=t.target||t.srcElement,i=e.tagName,s=!0;return(e.isContentEditable||(i==="INPUT"||i==="TEXTAREA"||i==="SELECT")&&!e.readOnly)&&(s=!1),s}function Ee(t){return typeof t=="string"&&(t=L(t)),d.indexOf(t)!==-1}function Me(t,e){var i,s;t||(t=B());for(var r in m)if(Object.prototype.hasOwnProperty.call(m,r))for(i=m[r],s=0;s<i.length;)i[s].scope===t?i.splice(s,1):s++;B()===t&&_e(e||"all")}function Oe(t){var e=t.keyCode||t.which||t.charCode,i=d.indexOf(e);if(i>=0&&d.splice(i,1),t.key&&t.key.toLowerCase()==="meta"&&d.splice(0,d.length),(e===93||e===224)&&(e=91),e in g){g[e]=!1;for(var s in k)k[s]===e&&(b[s]=!1)}}function Ke(t){if(typeof t>"u")Object.keys(m).forEach(function(a){return delete m[a]});else if(Array.isArray(t))t.forEach(function(a){a.key&&z(a)});else if(typeof t=="object")t.key&&z(t);else if(typeof t=="string"){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];var r=i[0],n=i[1];typeof r=="function"&&(n=r,r=""),z({key:t,scope:r,method:n,splitKey:"+"})}}var z=function(e){var i=e.key,s=e.scope,r=e.method,n=e.splitKey,a=n===void 0?"+":n,l=me(i);l.forEach(function(o){var c=o.split(a),y=c.length,_=c[y-1],h=_==="*"?"*":L(_);if(m[h]){s||(s=B());var u=y>1?pe(k,c):[];m[h]=m[h].filter(function(f){var p=r?f.method===r:!0;return!(p&&f.scope===s&&ve(f.mods,u))})}})};function fe(t,e,i,s){if(e.element===s){var r;if(e.scope===i||e.scope==="all"){r=e.mods.length>0;for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(!g[n]&&e.mods.indexOf(+n)>-1||g[n]&&e.mods.indexOf(+n)===-1)&&(r=!1);(e.mods.length===0&&!g[16]&&!g[18]&&!g[17]&&!g[91]||r||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}function de(t,e){var i=m["*"],s=t.keyCode||t.which||t.charCode;if(b.filter.call(this,t)){if((s===93||s===224)&&(s=91),d.indexOf(s)===-1&&s!==229&&d.push(s),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(f){var p=J[f];t[f]&&d.indexOf(p)===-1?d.push(p):!t[f]&&d.indexOf(p)>-1?d.splice(d.indexOf(p),1):f==="metaKey"&&t[f]&&d.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(d=d.slice(d.indexOf(p))))}),s in g){g[s]=!0;for(var r in k)k[r]===s&&(b[r]=!0);if(!i)return}for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&(g[n]=t[J[n]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(d.indexOf(17)===-1&&d.push(17),d.indexOf(18)===-1&&d.push(18),g[17]=!0,g[18]=!0);var a=B();if(i)for(var l=0;l<i.length;l++)i[l].scope===a&&(t.type==="keydown"&&i[l].keydown||t.type==="keyup"&&i[l].keyup)&&fe(t,i[l],a,e);if(s in m){for(var o=0;o<m[s].length;o++)if((t.type==="keydown"&&m[s][o].keydown||t.type==="keyup"&&m[s][o].keyup)&&m[s][o].key){for(var c=m[s][o],y=c.splitKey,_=c.key.split(y),h=[],u=0;u<_.length;u++)h.push(L(_[u]));h.sort().join("")===d.sort().join("")&&fe(t,c,a,e)}}}}function Te(t){return ge.indexOf(t)>-1}function b(t,e,i){d=[];var s=me(t),r=[],n="all",a=document,l=0,o=!1,c=!0,y="+",_=!1;for(i===void 0&&typeof e=="function"&&(i=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(n=e.scope),e.element&&(a=e.element),e.keyup&&(o=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(_=e.capture),typeof e.splitKey=="string"&&(y=e.splitKey)),typeof e=="string"&&(n=e);l<s.length;l++)t=s[l].split(y),r=[],t.length>1&&(r=pe(k,t)),t=t[t.length-1],t=t==="*"?"*":L(t),t in m||(m[t]=[]),m[t].push({keyup:o,keydown:c,scope:n,mods:r,shortcut:s[l],method:i,key:s[l],splitKey:y,element:a});typeof a<"u"&&!Te(a)&&window&&(ge.push(a),N(a,"keydown",function(h){de(h,a)},_),he||(he=!0,N(window,"focus",function(){d=[]},_)),N(a,"keyup",function(h){de(h,a),Oe(h)},_))}function Be(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(m).forEach(function(i){var s=m[i].filter(function(r){return r.scope===e&&r.shortcut===t});s.forEach(function(r){r&&r.method&&r.method()})})}var F={getPressedKeyString:xe,setScope:_e,getScope:B,deleteScope:Me,getPressedKeyCodes:we,isPressed:Ee,filter:He,trigger:Be,unbind:Ke,keyMap:T,modifier:k,modifierMap:J};for(S in F)Object.prototype.hasOwnProperty.call(F,S)&&(b[S]=F[S]);var S;typeof window<"u"&&(ue=window.hotkeys,b.noConflict=function(t){return t&&window.hotkeys===b&&(window.hotkeys=ue),b},window.hotkeys=b);var ue;var v=b,C=class extends Q{static get scopedElements(){return{"ninja-action":ae,"ninja-header":se}}constructor(){super(),this._headerRef=Z(),this.placeholder="Type a command or search...",this.disableHotkeys=!1,this.searchType="regex",this.highlightMatches=!1,this.searchLabel="Search for actions",this.listboxLabel="List of actions",this.hideBreadcrumbs=!1,this.openHotkey="cmd+k,ctrl+k",this.navigationUpHotkey="up",this.navigationDownHotkey="down",this.closeHotkey="esc",this.goBackHotkey="backspace",this.selectHotkey="enter",this.hotKeysJoinedView=!1,this.noAutoLoadMdIcons=!1,this.data=[],this.__selected__=null,this.visible=!1,this._bump=!0,this._actionMatches=[],this._search="",this.currentRoot=void 0,this._flatData=[]}open(e={}){this._bump=!0,this.visible=!0;let i=this._headerRef.value;if(requestAnimationFrame(()=>{i&&(i.focusSearch(),i.expanded=!0,i.controls="actions-list")}),this._actionMatches.length>0){this._selected=this._actionMatches[0];let s=this._headerRef.value;s&&this._selected&&this._selected.id&&(s.activeDescendant=this._selected.id)}this.setParent(e.parent)}close(){this._bump=!1,this.visible=!1;let e=this._headerRef.value;e&&(e.expanded=!1)}setParent(e){e?this.currentRoot=e:this.currentRoot=void 0,this._selected=void 0,this._search="",this._headerRef.value?.setSearch("")}getBreadcrumbs(){let e=[],i=this._selected?.parent;if(i)for(e.push(i);i;){let s=this._flatData.find(r=>r.id===i);s?.parent&&e.push(s.parent),i=s?s.parent:void 0}return e.reverse()}get _selected(){return this.__selected__}set _selected(e){let i=this._headerRef.value;i&&e&&e.id&&(i.activeDescendant=e.id);let s=this.__selected__;this.__selected__=e,this.requestUpdate("_selected",s)}connectedCallback(){super.connectedCallback(),this.noAutoLoadMdIcons||document.fonts.load("24px Material Icons","apps").then(()=>{}),this._registerInternalHotkeys()}disconnectedCallback(){super.disconnectedCallback(),this._unregisterInternalHotkeys()}_flattern(e){let i=[];s(e);function s(r,n){r.forEach(a=>{if(n&&(a.parent=n),a.children){let l=[...a.children.filter(o=>typeof o!="string")];a.children=a.children.map(o=>typeof o=="string"?o:o.id||""),s(l,a.id)}i.push(a)})}return i}update(e){e.has("data")&&(this._flatData=this._flattern(this.data),this.disableHotkeys||this._flatData.forEach(i=>{i.hotkey&&v(i.hotkey,s=>{s.preventDefault(),i.handler&&i.handler(i,s,this._search)})})),super.update(e)}shouldNotOpen(e){let i=e.composedPath(),s=["input","textarea"];return i.some(r=>r?.getAttribute?.("contenteditable")==="true"?!0:s.includes(r?.tagName?.toLowerCase()))}_registerInternalHotkeys(){this.openHotkey&&v(this.openHotkey,e=>{this.shouldNotOpen(e)||(e.preventDefault(),this.visible?this.close():this.open())}),this.selectHotkey&&v(this.selectHotkey,e=>{this.visible&&(e.preventDefault(),this._actionSelected(this._actionMatches[this._selectedIndex],e))}),this.goBackHotkey&&v(this.goBackHotkey,e=>{this.visible&&(this._search||(e.preventDefault(),this._goBack()))}),this.navigationDownHotkey&&v(this.navigationDownHotkey,e=>{this.visible&&(e.preventDefault(),this._selectedIndex>=this._actionMatches.length-1?this._selected=this._actionMatches[0]:this._selected=this._actionMatches[this._selectedIndex+1])}),this.navigationUpHotkey&&v(this.navigationUpHotkey,e=>{this.visible&&(e.preventDefault(),this._selectedIndex===0?this._selected=this._actionMatches[this._actionMatches.length-1]:this._selected=this._actionMatches[this._selectedIndex-1])}),this.closeHotkey&&v(this.closeHotkey,e=>{this.visible&&(e.preventDefault(),this.visible=!1,this.close())})}_unregisterInternalHotkeys(){this.openHotkey&&v.unbind(this.openHotkey),this.selectHotkey&&v.unbind(this.selectHotkey),this.goBackHotkey&&v.unbind(this.goBackHotkey),this.navigationDownHotkey&&v.unbind(this.navigationDownHotkey),this.navigationUpHotkey&&v.unbind(this.navigationUpHotkey),this.closeHotkey&&v.unbind(this.closeHotkey)}_actionFocused(e,i){this._selected=e,i.target.ensureInView()}_onTransitionEnd(){this._bump=!1}get breadcrumbs(){return this.getBreadcrumbs()}_goBack(){let e=this.getBreadcrumbs();if(e){let i=e.length>1?e[e.length-2]:void 0;this.setParent(i);return}}findActionElement(e=this._selectedIndex){let i=this._actionMatches[e]?.id;if(i==null)return null;let s="#ninja-action__"+i;return this.shadowRoot?.querySelector(s)}stringToRegExp(e){return ne(e)}findMatches(e){let i=this.stringToRegExp(this._search),s={searchRegex:i,searchString:this._search};return e.filter(r=>{if(this._search.trim()==="")return r.parent===this.currentRoot&&!0;let{matcher:n,title:a,keywords:l,content:o}=r,c=null;if(typeof n=="function"&&(c=n(r,s)),(c==null&&!this.searchType||this.searchType==="regex")&&(c=!!(a&&a.match(i)||l&&l.match(i)||o&&o.match(i))),c==null&&this.searchType==="fuzzy"){let y=this._search;c=!!(a&&q(y,a)||l&&q(y,l)||o&&q(y,o))}return c==null&&(c=!!c),(!this.currentRoot&&this._search||r.parent===this.currentRoot)&&c})}render(){let e={bump:this._bump,"modal-content":!0},i={visible:this.visible,modal:!0},s,r=this._flatData;r=this.findMatches(r),s=r.reduce((l,o)=>l.set(o.section,[...l.get(o.section)||[],o]),new Map),this._actionMatches=[...s.values()].flat(),this._actionMatches.length>0&&this._selectedIndex===-1&&(this._selected=this._actionMatches[0]),this._actionMatches.length===0&&(this._selected=void 0);let n=l=>M` ${ce(l,o=>o.id,o=>M`<ninja-action
            id=${"ninja-action__"+o.id}
            role="option"
            exportparts="ninja-action, ninja-selected,ninja-icon, ninja-hotkeys, ninja-hotkey, ninja-action__header, ninja-action__title, ninja-action__content, ninja-action__highlight"
            aria-selected=${U(o.id===this._selected?.id)}
            .searchQuery=${this._search}
            .selected=${U(o.id===this._selected?.id)}
            .hotKeysJoinedView=${this.hotKeysJoinedView}
            .searchType=${this.searchType}
            .highlightMatches=${this.highlightMatches}
            tabindex="-1"
            @mousemove=${c=>{this._actionFocused(o,c)}}
            @actionsSelected=${c=>this._actionSelected(c.detail,c)}
            .action=${o}
          ></ninja-action>`)}`,a=[];return s.forEach((l,o)=>{let c=o?M`<div class="group-header">${o}</div>`:void 0;a.push(M`${c}${n(l)}`)}),M`
      <div
        part="modal-overlay"
        @click=${this._overlayClick}
        class=${I(i)}
      >
        <div
          part="modal-content"
          class=${I(e)}
          @animationend=${this._onTransitionEnd}
        >
          <ninja-header
            part="modal-header"
            exportparts="ninja-input,ninja-input-wrapper"
            ${ee(this._headerRef)}
            .placeholder=${this.placeholder}
            .hideBreadcrumbs=${this.hideBreadcrumbs}
            .breadcrumbs=${this.getBreadcrumbs()}
            searchLabel=${this.searchLabel}
            @change=${this._handleInput}
            @setParent=${l=>this.setParent(l.detail.parent)}
            @close=${this.close}
          >
          </ninja-header>
          <div part="modal-body" class="modal-body">
            <div
              id="actions-list"
              class="actions-list"
              role="listbox"
              part="actions-list"
              aria-labelledby="listbox-label"
            >
              ${a}
            </div>

            <label id="listbox-label" class="visually-hidden">
              <slot>
                <span>${this.listboxLabel}</span>
              </slot>
            </label>
            <slot name="footer"> ${oe} </slot>
          </div>
        </div>
      </div>
    `}get _selectedIndex(){return this._selected?this._actionMatches.indexOf(this._selected):-1}_actionSelected(e,i){this.dispatchEvent(new CustomEvent("selected",{detail:{search:this._search,action:e},bubbles:!0,composed:!0})),e&&(e.children&&e.children?.length>0&&(this.currentRoot=e.id,this._search=""),this._headerRef.value?.setSearch(""),this._headerRef.value?.focusSearch(),e.handler?e.handler(e,i,this._search)?.keepOpen||this.close():this.findActionElement(this._selectedIndex)?.forceClick(),this._bump=!0)}async _handleInput(e){this._search=e.detail.search,await this.updateComplete,this.dispatchEvent(new CustomEvent("change",{detail:{search:this._search,actions:this._actionMatches},bubbles:!0,composed:!0}))}_overlayClick(e){let i=e.target;i instanceof Element&&i?.classList.contains("modal")&&this.close()}};R(C,"baseName","ninja-keys"),R(C,"styles",[te,ie]),R(C,"properties",{placeholder:{type:String},disableHotkeys:{type:Boolean},searchType:{attribute:"search-type"},searchLabel:{attribute:"search-label"},listboxLabel:{attribute:"listbox-label"},hideBreadcrumbs:{type:Boolean},openHotkey:{},navigationUpHotkey:{},navigationDownHotkey:{},closeHotkey:{},goBackHotkey:{},selectHotkey:{},hotKeysJoinedView:{type:Boolean},noAutoLoadMdIcons:{type:Boolean},data:{type:Array,hasChanged(){return!0}},highlightMatches:{type:Boolean,reflect:!0,attribute:"highlight-matches"},__selected__:{state:!0},visible:{state:!0},_bump:{state:!0},_actionMatches:{state:!0},_search:{state:!0},currentRoot:{state:!0},_flatData:{state:!0}});function q(t,e){return[t,...t.split(/\s+/)].some(i=>re(i,e))}export{C as a};
/*! Bundled license information:

lit-html/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/live.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=/konnors-ninja-keys/bridgetown/static/chunks/chunk-XNW6MDRL.js.map
